<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Events Voting & Calendar</title>
    
    <link rel="icon" type="image/png" href="https://upload.wikimedia.org/wikipedia/commons/thumb/8/88/International_Baccalaureate_Logo.svg/1200px-International_Baccalaureate_Logo.svg.png">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(to right, #65cef4, #7601f4, #860161);
            color: #240041;
            margin: 0;
            padding: 0;
        }
        h1, h2 {
            text-align: center;
            color: #6a11cb;
        }
        p {
            text-align: justify;
            text-justify: inter-word;
            color: #36026E;
        }
        
        .main-content {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 40px;
            padding: 80px 40px 40px 40px; 
            flex-wrap: wrap;
        }
        .column {
            display: flex;
            flex-direction: column;
            gap: 30px;
            flex: 1;
            max-width: 500px;
        }
        .container, .calendar-container {
            background: #a4d1ff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 6px 18px rgba(0,0,0,0.2);
        }
        .calendar-container { max-width: 600px; flex: 1; }

        /* --- Smaller, better formatted event boxes --- */
        .events-section {
            padding: 40px 60px;
        }
        .events-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        .event-box {
            background: #a4d1ff;
            border-radius: 10px;
            padding: 15px 18px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            font-size: 0.95em;
            line-height: 1.4;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .event-box:hover {
            transform: translateY(-4px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.25);
        }
        .event-title {
            font-weight: bold;
            font-size: 1.05em;
            color: #240589;
            margin-bottom: 4px;
        }
        .event-date {
            font-size: 0.9em;
            color: #36026E;
            margin-bottom: 6px;
        }
        .event-desc {
            font-size: 0.9em;
            margin-bottom: 8px;
        }
        .event-votes {
            font-weight: 500;
            color: #240589;
            margin-bottom: 6px;
            font-size: 0.9em;
        }
        .vote-form {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-top: 8px;
        }

        input[type="email"], input[type="text"], input[type="date"], input[type="password"], textarea {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 0.9em;
        }
        button {
            padding: 7px 12px;
            background: #6a11cb;
            color: #fff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: 0.3s;
            font-size: 0.9em;
        }
        button:hover { background: #2575fc; }
        textarea { resize: vertical; min-height: 60px; }

        #calendar {
            background: #fff;
            border-radius: 8px;
            padding: 10px;
        }
        .fc-toolbar-title { color: #240589; }
        .fc-daygrid-event {
            background-color: #6a11cb !important;
            border: none !important;
            color: white !important;
            border-radius: 4px;
            padding: 2px 5px;
            font-size: 0.9em;
        }
        .fc-button {
            background: #6a11cb !important;
            border: none !important;
            border-radius: 6px !important;
            color: white !important;
        }
        .fc-button:hover { background: #2575fc !important; }

        footer, .header-text {
            text-align: center;
            color: #dda6a6ff;
            margin-top: 50px;
        }

        .fixed-header {
            position: fixed;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.2);
            color: #dda6a6ff;
            padding: 6px 14px;
            border-radius: 12px;
            font-size: 0.9em;
            backdrop-filter: blur(6px);
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px; 
        }

        .fixed-header img {
            height: 20px;
            width: auto;
            border-radius: 4px;
            opacity: 0.9; 
        }

        .light-title {
            color: #cfaaff;
            text-align: center;
            margin-top: 60px;
        }
    </style>
</head>
<body>

    <div class="fixed-header">
        <img src="https://thamesbritishschool.es/wp-content/uploads/2024/06/thames-british-school-870x0-c-default.webp" alt="Thames British School Logo">
        <span>Thames British School</span>
    </div>

    <div class="main-content">
        <div class="column">
            <div class="container">
                <h1>Add New Event</h1>
                <form action="/add_event" method="post">
                    <input type="text" name="title" placeholder="Event Title" required>
                    <textarea name="description" placeholder="Event Description"></textarea>
                    <input type="date" name="date" required>
                    <input type="password" name="password" placeholder="Set event password (optional)">
                    <button type="submit">Add Event</button>
                </form>
            </div>

            <div class="container">
                <h1>About the project</h1>
                <p><em>Finding and organising activities and getting people to agree on these is often difficult. In a poll I ran, about 60% of 16–17-year-olds said their plans often got cancelled because not everyone could join, usually due to problems choosing a date, location, or activity. Only 30% said arguments caused plans to fail, showing that the main issue is organizing, not disagreements.
                To help solve this, I’m creating an online platform that makes planning with friends easier. The platform lets users suggest ideas, vote on activities, and find a date that works for everyone — all in one place.</em></p>
            </div>
        </div>

        <div class="calendar-container">
            <h1>Calendar</h1>
            <div id="calendar"></div>
        </div>
    </div>

    <!-- Smaller, neater event boxes -->
    <section class="events-section">
        <h1 class="light-title">Upcoming Events</h1>
        <div class="events-list">
            {% if events and events|length > 0 %}
                {% for id, event in events.items() %}
                <div class="event-box">
                    <div class="event-title">{{ event["title"] }}</div>
                    <div class="event-date">{{ event["date"] }}</div>
                    <div class="event-desc">{{ event["description"] }}</div>
                    <div class="event-votes">Votes: {{ event["votes"]|length }}</div>

                    <form class="vote-form" action="/vote/{{ id }}" method="post">
                        <input type="email" name="email" placeholder="Enter your email" required>
                        {% if event["password"] %}
                            <input type="password" name="password" placeholder="Enter event password" required>
                        {% endif %}
                        <button type="submit">Vote</button>
                    </form>
                </div>
                {% endfor %}
            {% else %}
                <p style="color:white; text-align:center;">No events yet. Add one above!</p>
            {% endif %}
        </div>
    </section>

    <footer>
        &copy; 2025 Student Events Voting App — Emma Wix Montes
    </footer>

    <script>
    document.addEventListener("DOMContentLoaded", function() {
        var calendarEl = document.getElementById("calendar");
        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: "dayGridMonth",
            events: "/events",  
            eventClick: function(info) {
                alert(
                    "Title: " + info.event.title +
                    "\nDate: " + info.event.start.toISOString().split("T")[0] +
                    "\nDescription: " + info.event.extendedProps.description +
                    "\nVotes: " + info.event.extendedProps.votes
                );
            }
        });
        calendar.render();
    });
    </script>
</body>
</html>
